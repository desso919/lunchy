package com.tu.lunchy.dao.impl;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.tu.lunchy.dao.objects.Menu;
import com.tu.lunchy.database.DatabaseConnection;

public class OrderDaoImpl {

	public Order getOrder(int menuId) throws SQLException {
		Connection connection = DatabaseConnection.getConnection();
		Menu menu = new Menu();

		String selectQuery = "select * from menus where menu_id = ?";

		PreparedStatement preparedStatement = connection.prepareStatement(selectQuery);
		preparedStatement.setInt(1, menuId);
		ResultSet resultSet = preparedStatement.executeQuery();

		if(resultSet.next()) {
			menu.setMenuName(resultSet.getString("menu_name"));
			menu.setMealsForThisMenu(getMealsForMenu(connection, menuId));
		}
		
		return menu;
	}
	
}
