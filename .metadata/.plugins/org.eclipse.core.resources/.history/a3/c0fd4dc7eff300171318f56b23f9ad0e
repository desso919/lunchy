package com.tu.lunchy.dao.impl;

import java.math.BigDecimal;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.tu.lunchy.dao.objects.User;
import com.tu.lunchy.database.DatabaseConnection;

public class MealDaoImpl {

	public User getMeal(int mealId) throws SQLException {
		Connection connection = DatabaseConnection.getConnection();
		User user = null;

		String selectQuery = "select * from meals where meal_id = ?";

		PreparedStatement preparedStatement = connection.prepareStatement(selectQuery);
		preparedStatement.setString(1, mealId);
		ResultSet resultSet = preparedStatement.executeQuery();

		while (resultSet.next()) {
			String mealName = resultSet.getString("meal_name");
			String description = resultSet.getString("description");
			String ingredients = resultSet.getString("ingredients");
			BigDecimal price = resultSet.getDecimal("price");

			user = new User(userid, username, password, account_type);
		}

		return user;
	}
	
	public boolean addUser(User user) throws SQLException {
		Connection connection = DatabaseConnection.getConnection();

		String sqlQuery = "INSERT INTO users (username, password, account_type_id) VALUES (?, ?, ?)";

		PreparedStatement preparedStatement = connection.prepareStatement(sqlQuery);
		preparedStatement.setString(1, user.getUsername());
		preparedStatement.setString(2, user.getPassword());;
		preparedStatement.setInt(3, user.getAccountType());
		int result = preparedStatement.executeUpdate();

		if(result > 0) {
			return true;
		}

		return false;
	}
	
}
